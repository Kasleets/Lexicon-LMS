@page "/activityadd/{ModuleId:guid}"

<div class="custom-width">
    <h3 class="text-center">Add Activity</h3>
    <EditForm Model="@_activityToAddDto" OnValidSubmit="@HandleValidSubmit">

        <DataAnnotationsValidator/>
        <div class="form-group">
            <InputSelect @bind-Value="@_activityToAddDto!.ModuleId">
                <option selected value="">-- select a activity --</option>
                @foreach (var module in Modules)
                {
                    <option value="@module.Id" @key="module.Id">@module.Name</option>
                }
            </InputSelect>
            <ValidationMessage For="@(() => _activityToAddDto!.ModuleId)" />
        </div>
        
        <div class="form-group">
            <InputSelect @bind-Value="@_activityToAddDto!.ActivityTypeId">
                <option selected value="">-- select a type --</option>
                @foreach (var type in Activitytypes)
                {
                    <option value="@type.Id" @key="type.Id">@type.Name</option>
                }
            </InputSelect>
            <ValidationMessage For="@(() => _activityToAddDto!.ActivityTypeId)" />
        </div>

        <p class="text-danger">@_successMessage</p>
        <div class="form-group">
            <label for="Name">Name:</label>
            <InputText maxlength="30" id="Name" @bind-Value="_activityToAddDto!.Name" class="form-control"/>
            <ValidationMessage For="@(() => _activityToAddDto!.Name)"/>
        </div>

        <div class="form-group description-height">
            <label for="Description">Description:</label>
            <textarea maxlength="100" id="Description" @bind="_activityToAddDto!.Description" class="form-control"></textarea>
            <ValidationMessage For="@(() => _activityToAddDto.Description)"/>
        </div>

        <div class="form-group">
            <label for="StartDate">Start Date:</label>
            <InputDate id="StartDate" @bind-Value="_activityToAddDto.StartTime" class="form-control"/>
        </div>

        <div class="form-group">
            <label for="EndDate">End Date:</label>
            <InputDate id="EndDate" @bind-Value="_activityToAddDto.EndTime" class="form-control"/>
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn-success">Add Activity</button>
            <a class="btn btn-primary" href="@("/activity")">Overview Activities</a>
        </div>

    </EditForm>
    
</div>